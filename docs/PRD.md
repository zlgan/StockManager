# 商品库存管理小程序需求文档

## 项目概述

本项目是一个基于微信小程序的商品库存管理系统，主要用于中小型商户进行商品库存管理、进销存记录、客户供应商管理等业务操作。系统分为后台管理功能和前台业务功能两大模块。

## 功能模块

### 一、后台管理功能

#### 1. 产品管理

##### 1.1 产品列表页面 (pages/products/products)
**页面功能：** 展示所有产品信息，支持搜索、筛选和导出功能

**字段顺序：**

1. 搜索区域
   - 产品类别（下拉选择）
   - 产品名称（文本输入）
   - 产品编码（文本输入，带扫码功能）
2. 查询结果区域
   - 导出Excel按钮
3. 产品列表显示
   - 产品图片
   - 产品名称
   - 产品类别
   - 产品编码
   - 库存数量
   - 产品价格
4. 添加产品浮动按钮

##### 1.2 产品详情页面 (pages/product_detail/product_detail)
**页面功能：** 新增或编辑产品信息

**字段顺序：**
1. 产品图片（上传功能）
2. 产品名称（必填）
3. 产品型号（带扫码功能）
4. 产品类别（下拉选择）
5. 产品单位（文本输入）
6. 规格名称（文本输入）
7. 供应商（下拉选择）
8. 入库价格（数字输入）
9. 出库价格（数字输入）
10. 库存预警（数字输入）
11. 启用状态（开关）
12. 备注（文本域）
13. 操作按钮（取消、保存）

##### 1.3 产品类别管理页面 (pages/product_category/product_category)
**页面功能：** 管理产品分类

**字段顺序：**
1. 添加/编辑表单
   - 类别名称（文本输入）
   - 操作按钮（添加/更新、取消）
2. 类别列表
   - 类别名称
   - 操作按钮（编辑、删除）

#### 2. 供应商管理

##### 2.1 供应商列表页面 (pages/suppliers/suppliers)
**页面功能：** 展示所有供应商信息，支持搜索功能

**字段顺序：**
1. 搜索区域
   - 供应商名称（文本输入）
   - 供应商编码（文本输入）
2. 查询结果区域
3. 供应商列表显示
   - 供应商名称
   - 供应商编码
   - 联系人
   - 联系电话
   - 地址
4. 添加供应商浮动按钮

##### 2.2 供应商详情页面 (pages/supplier_detail/supplier_detail)
**页面功能：** 新增或编辑供应商信息

**字段顺序：**
1. 供应商名称（必填）
2. 供应商编码（必填）
3. 地址（文本输入）
4. 联系人（文本输入）
5. 联系电话（文本输入）
6. 备注（文本域）
7. 操作按钮（取消、保存）

#### 3. 客户管理

##### 3.1 客户列表页面 (pages/customers/customers)
**页面功能：** 展示所有客户信息，支持搜索功能

**字段顺序：**
1. 搜索区域
   - 客户名称（文本输入）
   - 联系人（文本输入）
   - 联系电话（文本输入）
2. 查询结果区域
3. 客户列表显示
   - 客户名称
   - 客户编码
   - 联系人
   - 联系电话
   - 地址
   - 服务月数
4. 添加客户浮动按钮

##### 3.2 客户详情页面 (pages/customer_detail/customer_detail)
**页面功能：** 新增或编辑客户信息

**字段顺序：**
1. 客户名称（必填）
2. 客户编码（必填）
3. 地址（必填）
4. 联系人（必填）
5. 联系电话（必填）
6. 可选产品（多选）
7. 售后周期（数字输入）
8. 备注（文本域）
9. 操作按钮（取消、保存）

#### 4. 员工管理

##### 4.1 员工列表页面 (pages/staff/staff)
**页面功能：** 展示所有员工信息，支持搜索功能

**字段顺序：**
1. 搜索区域
   - 用户名（文本输入）
   - 姓名（文本输入）
   - 联系电话（文本输入）
2. 员工列表显示
   - 用户名
   - 真实姓名
   - 联系电话
3. 添加员工浮动按钮

##### 4.2 员工详情页面 (pages/staff_detail/staff_detail)
**页面功能：** 新增或编辑员工信息

**字段顺序：**
1. 员工ID（非新增模式显示）
2. 用户名（文本输入）
3. 密码（密码输入）
4. 真实姓名（文本输入）
5. 联系电话（文本输入）
6. 备注（文本域）
7. 权限设置
   - 禁用入库操作（开关）
   - 禁用出库操作（开关）
8. 操作按钮（编辑、取消、保存）

#### 5. 系统设置

##### 5.1 系统设置页面 (pages/settings/settings)
**页面功能：** 配置系统各项参数

**字段顺序：**

1. 员工账号禁用库存点（开关）
2. 员工隐藏入库产品价格（开关）
3. 员工只能查看自己的入库/出库记录（开关）
4. 入库/出库记录需要管理员审批（开关）
5. 员工不能查看产品库存（开关）
6. 员工禁用产品编辑（开关）
7. 提示信息：更改后需要员工重新登录才能生效

### 二、前台业务功能

#### 1. 用户认证

##### 1.1 登录页面 (pages/login/login)
**页面功能：** 用户登录系统

**字段顺序：**
1. 页面标题
   - 欢迎回来
   - 登录您的账户
2. 登录表单
   - 用户名（文本输入，最大长度20）
   - 密码（密码输入，最大长度20）
   - 登录按钮
3. 注册链接
   - 还没有账户？立即注册

##### 1.2 注册页面 (pages/register/register)
**页面功能：** 新用户注册

**字段顺序：**
1. 页面标题
   - 创建您的账户
2. 注册表单
   - 店铺名称（文本输入，最大长度20）
   - 用户名（文本输入，最大长度20）
   - 密码（密码输入，最大长度20）
   - 确认密码（密码输入，最大长度20）
   - 注册按钮
3. 登录链接
   - 已有账户？立即登录

#### 2. 首页

##### 2.1 首页 (pages/index/index)
**页面功能：** 展示今日概览和快捷操作

**字段顺序：**
1. 今日概览
   - 入库统计（笔数、金额）
   - 出库统计（笔数、金额）
2. 快捷操作
   - 入库登记按钮
   - 出库登记按钮
3. 最近记录
   - 入库记录列表（产品名称、类型、数量、单位、金额、时间）
   - 出库记录列表（产品名称、类型、数量、单位、金额、时间）
   - 查看全部按钮（跳转到单据页面）

#### 3. 库存操作

##### 3.1 入库页面 (pages/inbound/inbound)
**页面功能：** 商品入库登记，

1. 出库入库单据目前阶段不需要审批，保存即为直接确认，但预留将来可能需要审批的可能性。

**字段顺序：**

1. 基本信息
   - 单据号（自动生成）
   - 入库类型（必填，下拉选择）
   - 入库日期（必填，日期选择）
   - 供应商（下拉选择）
2. 产品信息
   - 产品型号（带扫码功能）
   - 产品名称（必填，带搜索建议）
   - 产品图片（只读显示）
   - 当前库存数量（只读显示）
   - 入库数量（必填，数字输入）
   - 入库单价（必填，数字输入）
   - 删除产品按钮
3. 备注（文本域）
4. 汇总信息
   - 总数量
   - 总金额
5. 确认入库按钮

##### 3.2 出库页面 (pages/outbound/outbound)
**页面功能：** 商品出库登记

**字段顺序：**
1. 基本信息
   - 单据号（自动生成）
   - 出库类型（必填，下拉选择）
   - 出库日期（必填，日期选择）
   - 客户（下拉选择）
2. 产品信息
   - 产品型号（带扫码功能）
   - 产品名称（必填）
   - 产品图片（只读显示）
   - 当前库存数量（只读显示）
   - 出库数量（必填，数字输入）
   - 出库单价（必填，数字输入）
   - 删除产品按钮
3. 备注（文本域）
4. 汇总信息
   - 总数量
   - 总金额
5. 确认出库按钮

#### 4. 单据管理

##### 4.1 单据列表页面 (pages/bills/bills)
**页面功能：** 查看所有入库出库单据

**字段顺序：**
1. 搜索筛选区域
   - 搜索框（产品名称/单据号/制单人，带扫码功能）
   - 日期范围（开始日期、结束日期）
   - 单据类型（下拉选择）
   - 供应商（下拉选择）
   - 客户（下拉选择）
   - 操作按钮（搜索、重置）
2. 统计信息
   - 记录总数
   - 导出Excel按钮
3. 单据列表
   - 单据头部信息
     - 单据类型标签（入库单/出库单）
     - 单据号
     - 日期
   - 产品信息
     - 产品名称
     - 产品型号
     - 数量（带正负号标识）

##### 4.2 单据详情页面 (pages/bill_detail/bill_detail)
**页面功能：** 查看和编辑单据详细信息

1. 对于出库和入库单的修改采用差额调整的策略。

**字段顺序：**

1. 页面标题（单据详情/编辑单据）
2. 操作按钮（查看模式：编辑、删除）
3. 基本信息卡片
   - 单据号
   - 单据类型
   - 日期（编辑模式可选择）
   - 供应商/客户（编辑模式可选择）
4. 产品信息卡片
   - 添加产品按钮（编辑模式）
   - 产品列表
     - 产品编号
     - 产品型号
     - 产品名称

#### 5. 统计分析

##### 5.1 统计页面 (pages/statistics/statistics)
**页面功能：** 收益分析和库存盘点

**字段顺序：**
1. 标签页切换
   - 收益分析
   - 库存盘点

2. 收益分析内容
   - 筛选条件
     - 年度选择器
   - 汇总信息
     - 总利润
     - 入库总额（金额、笔数）
     - 出库总额（金额、笔数）
   - 月度明细
     - 月度收益趋势图
     - 月度数据表格（月份、入库金额、出库金额、利润）

3. 库存盘点内容
   - 库存概览
     - 产品总数
     - 库存总额
     - 预警库存按钮
   - 搜索框（产品名称/编码）
   - 库存分类统计
     - 分类名称
     - 分类价值
     - 产品数量

#### 6. 个人中心

##### 6.1 个人资料页面 (pages/profile/profile)
**页面功能：** 用户信息和功能导航

**字段顺序：**
1. 用户信息
   - 头像
   - 店铺名称
   - 用户名
2. 功能菜单
   - 产品管理
   - 产品类别
   - 供应商管理
   - 客户管理
   - 员工管理
   - 系统设置
3. 版本信息
   - 应用名称
   - 版本号
4. 退出登录按钮

##### 6.2 关于页面 (pages/about/about)
**页面功能：** 应用相关信息（待完善）

## 底部导航栏配置

根据app.json配置，系统包含以下底部导航：

1. **首页** (pages/index/index)
   - 图标：home.png / home_selected.png
   - 文字：首页

2. **入库** (pages/inbound/inbound)
   - 图标：inbound.png / inbound_selected.png
   - 文字：入库

3. **出库** (pages/outbound/outbound)
   - 图标：outbound.png / outbound_selected.png
   - 文字：出库

4. **单据** (pages/bills/bills)
   - 图标：bills.png / bills_selected.png
   - 文字：单据

5. **统计** (pages/statistics/statistics)
   - 图标：statistics.png / statistics_selected.png
   - 文字：统计

6. **我的** (pages/profile/profile)
   - 图标：profile.png / profile_selected.png
   - 文字：我的

## 技术特性

1. **扫码功能**：产品型号、产品编码等字段支持扫码输入
2. **搜索建议**：产品名称输入支持搜索建议
3. **数据导出**：支持Excel格式数据导出
4. **图表展示**：使用ec-canvas组件展示统计图表
5. **权限控制**：支持员工权限设置和功能限制
6. **数据验证**：表单字段支持必填验证和格式验证

## 数据流转

1. **产品管理**：产品信息 → 库存操作 → 单据记录 → 统计分析
2. **供应商/客户**：基础信息 → 关联入库/出库操作
3. **员工管理**：账号权限 → 功能访问控制
4. **系统设置**：全局配置 → 影响各模块功能行为

## 用户角色

1. **管理员**：拥有所有功能权限，可以管理员工、设置系统参数
2. **员工**：根据权限设置，可能受限于某些功能模块的访问和操作